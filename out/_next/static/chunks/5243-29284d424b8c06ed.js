"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5243],{80656:function(e,n,i){var t=i(85893),r=i(99226),o=i(83965),l=i(83321),a=i(15861),s=i(81458),c=i(47036),d=i(67294),u=i(25617),m=i(45084),x=i(48280),h=i(95400);n.Z=function(e){var n=(0,u.I0)(),i=(0,x.T)(),f=(0,x.C)((function(e){return e.image})),v=e.setImageField,p=e.image,y=d.useRef();return d.useEffect((function(){f.image&&!p&&v(f.image)}),[f,v,p]),(0,t.jsxs)(t.Fragment,{children:[p?(0,t.jsxs)(r.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"end",justifyContent:"end",width:"100%"},children:[(0,t.jsx)(o.Z,{component:"img",alt:p,sx:{maxWidth:"300px",maxHeight:"300px"},src:"".concat(m.LS,"storage/").concat(p)}),(0,t.jsxs)(l.Z,{variant:"text",color:"error",sx:{mt:2},onClick:function(){v(void 0),i(h.J6.uploadSuccess(void 0))},children:[" ","Remove"," "]})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.Z,{onClick:function(){y.current.click()},sx:{display:"flex",cursor:"pointer",justifyContent:"center",alignItems:"center",height:"200px",border:"2px dashed ".concat(c.Z[200]),backgroundColor:c.Z[100]},children:(0,t.jsx)(a.Z,{variant:"body1",component:"p",children:"Upload image"})}),f.loading&&(0,t.jsx)(s.Z,{color:"info"})]}),(0,t.jsx)("input",{ref:y,style:{display:"none"},type:"file",accept:"image/jpeg, image/png",onChange:function(){y.current.files.length>0&&(i(h.J6.uploadImage()),n({type:h.Zr.ADD_ITEM,payload:y.current.files[0]}))}})]})}},65243:function(e,n,i){i.r(n),i.d(n,{default:function(){return _}});var t=i(85893),r=i(67294),o=i(86886),l=i(15861),a=i(12963),s=i(50122),c=i(99226),d=i(46901),u=i(55113),m=i(61903),x=i(94054),h=i(50480),f=i(72852),v=i(33841),p=i(18360),y=i(18972),j=i(83321),g=i(98456),Z=i(38571),b=i(87536),P=i(80656),C=i(25617),S=i(72973),I=i(11163),w=i(48280);function E(e,n){(null==n||n>e.length)&&(n=e.length);for(var i=0,t=new Array(n);i<n;i++)t[i]=e[i];return t}function k(e,n,i){return n in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i,e}function A(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{},t=Object.keys(i);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),t.forEach((function(n){k(e,n,i[n])}))}return e}function O(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var i=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var t,r,o=[],l=!0,a=!1;try{for(i=i.call(e);!(l=(t=i.next()).done)&&(o.push(t.value),!n||o.length!==n);l=!0);}catch(s){a=!0,r=s}finally{try{l||null==i.return||i.return()}finally{if(a)throw r}}return o}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return E(e,n);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(i);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return E(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var _=function(e){var n,i,E,k,_,W=e.pid,D=((0,I.useRouter)(),O(r.useState(""),2)),T=D[0],F=D[1],R=O(r.useState(!1),2),L=R[0],N=R[1],M=O(r.useState(void 0),2),U=M[0],q=M[1],G=r.useRef(0),J=(0,w.C)((function(e){return e})),Q=(0,C.I0)(),X=(0,w.T)(),z=(0,b.cI)(),B=z.register,H=z.handleSubmit,V=(z.watch,z.reset,z.setValue);return z.formState.errors,r.useEffect((function(){var e;if(0==G.current&&W&&(null===(e=J.category)||void 0===e?void 0:e.list.length)>0){var n,i,t,r,o,l=null===(n=J.category)||void 0===n||null===(i=n.list)||void 0===i?void 0:i.find((function(e){return e.id===W}));Q({type:"category/GET_CATEGORY_SUCCESS",data:l||void 0}),V("name",(null===l||void 0===l?void 0:l.name)||""),V("name_fr",(null===l||void 0===l?void 0:l.name_fr)||""),V("description",(null===l||void 0===l?void 0:l.description)||""),N(null!==(o=1==(null===l||void 0===l||null===(t=l.condition)||void 0===t?void 0:t.value))&&void 0!==o&&o),F((null===l||void 0===l||null===(r=l.service)||void 0===r?void 0:r.id)||null),q((null===l||void 0===l?void 0:l.image)||void 0),G.current++}}),[Q,W,V,J.category]),(0,t.jsx)(Z.Z,{children:(0,t.jsx)(o.ZP,{container:!0,children:(0,t.jsxs)(o.ZP,{item:!0,xs:12,md:10,sx:{mx:"auto",my:4},children:[(0,t.jsx)(l.Z,{variant:"h3",component:"h1",sx:{fontWeight:"bold"},children:"Create a new category"}),(0,t.jsxs)(a.Z,{"aria-label":"breadcrumb",children:[(0,t.jsx)(s.Z,{underline:"hover",color:"inherit",href:"/",children:"Dashboard"}),(0,t.jsx)(s.Z,{underline:"hover",color:"inherit",href:"/material-ui/getting-started/installation/",children:"category"})]}),(0,t.jsxs)(c.Z,{component:"form",sx:{mt:5},onSubmit:H((function(e){var n,i;if(!U)return X(S.QX.actionCategoryFailed("Please upload image"));var t=null===(n=J.condition)||void 0===n||null===(i=n.list)||void 0===i?void 0:i.filter((function(e){return e.value==+L}));G.current;var r=A({},e,{image:U,service:{id:T},condition:t&&t[0]});X(S.QX.activeCategoryAction()),Q(W?{type:S.xC.UPDATE_ITEM,payload:A({},r,{id:W})}:{type:S.xC.ADD_ITEM,payload:r})})),children:[(null===(n=J.category)||void 0===n?void 0:n.error)&&(0,t.jsx)(d.Z,{severity:"error",sx:{my:1},children:null===(i=J.category)||void 0===i?void 0:i.error}),(null===(E=J.category)||void 0===E?void 0:E.success)&&(0,t.jsx)(d.Z,{severity:"success",sx:{my:1},children:"Operation Successful"}),(0,t.jsx)(u.Z,{elevation:0,sx:{p:4},children:(0,t.jsxs)(o.ZP,{container:!0,children:[(0,t.jsx)(o.ZP,{item:!0,xs:12,md:4,children:(0,t.jsx)(l.Z,{variant:"h6",component:"h2",sx:{fontWeight:"bold"},children:"Basic details"})}),(0,t.jsxs)(o.ZP,{item:!0,xs:12,md:8,children:[(0,t.jsx)(m.Z,A({id:"name",label:"Name EN",variant:"outlined",fullWidth:!0,color:"info",sx:{my:1},InputLabelProps:{shrink:!0}},B("name",{required:!0}))),(0,t.jsx)(m.Z,A({id:"name",label:"Name FR",variant:"outlined",fullWidth:!0,color:"info",sx:{my:1},InputLabelProps:{shrink:!0}},B("name_fr",{required:!1}))),(0,t.jsx)(m.Z,A({id:"outlined-multiline-static",label:"Description",multiline:!0,fullWidth:!0,sx:{my:1},color:"info",rows:4,InputLabelProps:{shrink:!0}},B("description",{required:!0})))]})]})}),(0,t.jsx)(u.Z,{elevation:0,sx:{mt:2,p:4},children:(0,t.jsxs)(o.ZP,{container:!0,children:[(0,t.jsxs)(o.ZP,{item:!0,xs:12,md:4,sx:{pr:5},children:[(0,t.jsx)(l.Z,{variant:"h6",component:"h2",sx:{fontWeight:"bold"},children:"Images"}),(0,t.jsx)(l.Z,{variant:"body2",component:"p",children:"The image will appear on website and mobile app."})]}),(0,t.jsx)(o.ZP,{item:!0,xs:12,md:8,children:(0,t.jsx)(P.Z,{setImageField:q,image:U})})]})}),(0,t.jsx)(u.Z,{elevation:0,sx:{mt:4,p:4},children:(0,t.jsxs)(o.ZP,{container:!0,children:[(0,t.jsxs)(o.ZP,{item:!0,xs:12,md:4,children:[(0,t.jsx)(l.Z,{variant:"h6",component:"h2",sx:{fontWeight:"bold"},children:"Active category"}),(0,t.jsx)(l.Z,{variant:"body2",component:"p",children:"only active category will be displayed on website"})]}),(0,t.jsx)(o.ZP,{item:!0,xs:12,md:8,children:(0,t.jsx)(x.Z,{fullWidth:!0,sx:{my:1},children:(0,t.jsx)(h.Z,{control:(0,t.jsx)(f.Z,{color:"info",value:L,checked:L,onChange:function(){return N(!L)}}),label:"Active"})})})]})}),(0,t.jsx)(u.Z,{elevation:0,sx:{mt:4,p:4},children:(0,t.jsxs)(o.ZP,{container:!0,children:[(0,t.jsx)(o.ZP,{item:!0,xs:12,md:4,children:(0,t.jsx)(l.Z,{variant:"h6",component:"h2",sx:{fontWeight:"bold"},children:"Service *"})}),(0,t.jsx)(o.ZP,{item:!0,xs:12,md:8,children:(0,t.jsxs)(x.Z,{fullWidth:!0,children:[(0,t.jsx)(v.Z,{id:"demo-simple-select-label",children:"Service"}),(0,t.jsx)(p.Z,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:T,label:"Category",onChange:function(e){F(e.target.value)},children:(null!==(_=null===(k=J.service)||void 0===k?void 0:k.list)&&void 0!==_?_:[]).map((function(e){return(0,t.jsx)(y.Z,{value:e.id,children:e.name},e.id)}))})]})})]})}),(0,t.jsxs)(o.ZP,{container:!0,sx:{mt:4},children:[(0,t.jsx)(o.ZP,{item:!0,xs:12,md:8,children:(0,t.jsx)(j.Z,{variant:"text",color:"error",children:"Delete"})}),(0,t.jsxs)(o.ZP,{item:!0,xs:12,md:4,sx:{justifyContent:"end",display:"flex"},children:[(0,t.jsx)(j.Z,{variant:"outlined",color:"info",sx:{mx:2},children:"Cancel"}),(0,t.jsxs)(j.Z,{variant:"contained",color:"info",disableElevation:!0,type:"submit",children:["Create"," ",J.category.isLoading&&(0,t.jsx)(g.Z,{color:"secondary",size:20,sx:{ml:2}})]})]})]})]})]})})})}}}]);