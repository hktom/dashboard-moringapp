"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3541],{80656:function(e,n,t){var i=t(85893),r=t(99226),o=t(83965),l=t(83321),s=t(15861),a=t(81458),c=t(47036),d=t(67294),u=t(25617),h=t(71406),m=t(48280),x=t(95400);n.Z=function(e){var n=(0,u.I0)(),t=(0,m.T)(),f=(0,m.C)((function(e){return e.image})),p=e.setImageField,j=e.image,Z=d.useRef();return d.useEffect((function(){f.image&&!j&&p(f.image)}),[f,p,j]),(0,i.jsxs)(i.Fragment,{children:[j?(0,i.jsxs)(r.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"end",justifyContent:"end",width:"100%"},children:[(0,i.jsx)(o.Z,{component:"img",alt:j,sx:{maxWidth:"300px",maxHeight:"300px"},src:"".concat(h.LS,"storage/").concat(j)}),(0,i.jsxs)(l.Z,{variant:"text",color:"error",sx:{mt:2},onClick:function(){p(void 0),t(x.J6.uploadSuccess(void 0))},children:[" ","Remove"," "]})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.Z,{onClick:function(){Z.current.click()},sx:{display:"flex",cursor:"pointer",justifyContent:"center",alignItems:"center",height:"200px",border:"2px dashed ".concat(c.Z[200]),backgroundColor:c.Z[100]},children:(0,i.jsx)(s.Z,{variant:"body1",component:"p",children:"Upload image"})}),f.loading&&(0,i.jsx)(a.Z,{color:"info"})]}),(0,i.jsx)("input",{ref:Z,style:{display:"none"},type:"file",accept:"image/jpeg, image/png",onChange:function(){Z.current.files.length>0&&(t(x.J6.uploadImage()),n({type:x.Zr.ADD_ITEM,payload:Z.current.files[0]}))}})]})}},43541:function(e,n,t){t.r(n);var i=t(85893),r=t(67294),o=t(86886),l=t(15861),s=t(12963),a=t(50122),c=t(99226),d=t(46901),u=t(55113),h=t(61903),m=t(94054),x=t(50480),f=t(72852),p=t(33841),j=t(57709),Z=t(87109),v=t(18360),b=t(18972),y=t(83321),g=t(98456),P=t(38571),k=t(87536),C=t(80656),_=t(25617),S=t(11163),I=t(48280),w=t(6001);function W(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,i=new Array(n);t<n;t++)i[t]=e[t];return i}function A(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function E(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},i=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),i.forEach((function(n){A(e,n,t[n])}))}return e}function O(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var i,r,o=[],l=!0,s=!1;try{for(t=t.call(e);!(l=(i=t.next()).done)&&(o.push(i.value),!n||o.length!==n);l=!0);}catch(a){s=!0,r=a}finally{try{l||null==t.return||t.return()}finally{if(s)throw r}}return o}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return W(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return W(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n.default=function(e){var n,t,W,A=O(r.useState(""),2),D=A[0],T=A[1],M=e.pid,F=((0,S.useRouter)(),O(r.useState(!1),2)),q=F[0],L=F[1],R=O(r.useState(!1),2),N=R[0],$=R[1],J=O(r.useState(!1),2),U=J[0],X=J[1],Y=O(r.useState(!1),2),z=Y[0],B=Y[1],H=O(r.useState(void 0),2),V=H[0],G=H[1],K=(0,_.I0)(),Q=(0,I.T)(),ee=(0,I.C)((function(e){return e})),ne=r.useRef(0),te=(0,k.cI)(),ie=te.register,re=te.handleSubmit,oe=(te.watch,te.setValue);return te.formState.errors,r.useEffect((function(){if(M&&ee.task.list.length>0&&0==ne.current){var e,n,t,i,r,o,l=ee.task.list.find((function(e){return e.id==M}));oe("name",l.name),oe("min_price",l.min_price),oe("price_by_hour",l.price_by_hour),oe("description",l.description),$(null!==(t=1==l.can_be_urgent)&&void 0!==t&&t),L(null!==(i=1==l.can_be_booked)&&void 0!==i&&i),X(null!==(r=1==l.accept_offer)&&void 0!==r&&r),B(null!==(o=1==(null===(e=l.condition)||void 0===e?void 0:e.value))&&void 0!==o&&o),G(l.image),T(null===(n=l.category)||void 0===n?void 0:n.id),ne.current++}}),[M,oe,ee.task]),(0,i.jsx)(P.Z,{children:(0,i.jsx)(o.ZP,{container:!0,children:(0,i.jsxs)(o.ZP,{item:!0,xs:12,md:10,sx:{mx:"auto",my:4},children:[(0,i.jsxs)(l.Z,{variant:"h3",component:"h1",sx:{fontWeight:"bold"},children:[M?"Edit":"Create"," a task"]}),(0,i.jsxs)(s.Z,{"aria-label":"breadcrumb",children:[(0,i.jsx)(a.Z,{underline:"hover",color:"inherit",href:"/",children:"Dashboard"}),(0,i.jsx)(a.Z,{underline:"hover",color:"inherit",href:"/material-ui/getting-started/installation/",children:"Task"})]}),(0,i.jsxs)(c.Z,{component:"form",sx:{mt:5},onSubmit:re((function(e){var n,t,i;if(V&&D){var r=null===(n=ee.condition)||void 0===n||null===(t=n.list)||void 0===t?void 0:t.filter((function(e){return e.value==+z})),o=E({},e,{image:V,can_be_booked:+q,can_be_urgent:+N,accept_offer:+U,active:{id:z},category:{id:D},user:{id:null===(i=ee.home.user)||void 0===i?void 0:i.id},condition:r&&r[0]});K(M?{type:w.XY.ADD_ITEM,payload:E({},o,{id:M})}:{type:w.XY.ADD_ITEM,payload:o})}else Q(w.mE.actionTaskFailure("Please select image and category"))})),children:[ee.task.error&&(0,i.jsx)(d.Z,{severity:"error",sx:{my:1},children:ee.task.error}),ee.task.success&&(0,i.jsx)(d.Z,{severity:"success",sx:{my:1},children:"Operation Successful"}),(0,i.jsx)(u.Z,{elevation:0,sx:{p:4},children:(0,i.jsxs)(o.ZP,{container:!0,children:[(0,i.jsx)(o.ZP,{item:!0,xs:12,md:4,children:(0,i.jsx)(l.Z,{variant:"h6",component:"h2",sx:{fontWeight:"bold"},children:"Basic details"})}),(0,i.jsxs)(o.ZP,{item:!0,xs:12,md:8,children:[(0,i.jsx)(h.Z,E({id:"name",label:"Name",variant:"outlined",fullWidth:!0,color:"info",InputLabelProps:{shrink:!0},sx:{my:1}},ie("name",{required:!0}))),(0,i.jsx)(h.Z,E({id:"outlined-multiline-static",label:"Description",multiline:!0,fullWidth:!0,sx:{my:1},color:"info",InputLabelProps:{shrink:!0},rows:4},ie("description",{required:!0})))]})]})}),(0,i.jsx)(u.Z,{elevation:0,sx:{mt:2,p:4},children:(0,i.jsxs)(o.ZP,{container:!0,children:[(0,i.jsxs)(o.ZP,{item:!0,xs:12,md:4,sx:{pr:5},children:[(0,i.jsx)(l.Z,{variant:"h6",component:"h2",sx:{fontWeight:"bold"},children:"Images"}),(0,i.jsx)(l.Z,{variant:"body2",component:"p",children:"The image will appear on website and mobile app."})]}),(0,i.jsx)(o.ZP,{item:!0,xs:12,md:8,children:(0,i.jsx)(C.Z,{setImageField:G,image:V})})]})}),(0,i.jsx)(u.Z,{elevation:0,sx:{mt:4,p:4},children:(0,i.jsxs)(o.ZP,{container:!0,children:[(0,i.jsx)(o.ZP,{item:!0,xs:12,md:4,children:(0,i.jsx)(l.Z,{variant:"h6",component:"h2",sx:{fontWeight:"bold"},children:"Options"})}),(0,i.jsxs)(o.ZP,{item:!0,xs:12,md:8,children:[(0,i.jsx)(m.Z,{fullWidth:!0,sx:{my:1},children:(0,i.jsx)(x.Z,{control:(0,i.jsx)(f.Z,{color:"info",value:N,checked:N,onChange:function(){return $(!N)}}),label:"Can be urgent"})}),(0,i.jsx)(m.Z,{fullWidth:!0,sx:{my:1},children:(0,i.jsx)(x.Z,{control:(0,i.jsx)(f.Z,{color:"info",checked:q,value:q,onChange:function(){return L(!q)}}),label:"Can be booked"})}),(0,i.jsx)(m.Z,{fullWidth:!0,sx:{my:1},children:(0,i.jsx)(x.Z,{control:(0,i.jsx)(f.Z,{color:"info",checked:U,value:U,onChange:function(){return X(!U)}}),label:"Can accept offer"})}),(0,i.jsx)(m.Z,{fullWidth:!0,sx:{my:1},children:(0,i.jsx)(x.Z,{control:(0,i.jsx)(f.Z,{color:"info",checked:z,value:z,onChange:function(){return B(!z)}}),label:"Active"})}),(0,i.jsxs)(m.Z,{fullWidth:!0,sx:{my:1},children:[(0,i.jsx)(p.Z,{htmlFor:"outlined-adornment-amount",children:"Price by hour"}),(0,i.jsx)(j.Z,E({id:"outlined-adornment-amount",inputProps:{inputMode:"numeric",pattern:"[0-9]*"},startAdornment:(0,i.jsx)(Z.Z,{position:"start",children:"$"}),label:"Price"},ie("price_by_hour",{required:!0})))]}),(0,i.jsxs)(m.Z,{fullWidth:!0,sx:{my:1},children:[(0,i.jsx)(p.Z,{htmlFor:"outlined-adornment-amount",children:"Min Price"}),(0,i.jsx)(j.Z,E({id:"outlined-adornment-amount",inputProps:{inputMode:"numeric",pattern:"[0-9]*"},startAdornment:(0,i.jsx)(Z.Z,{position:"start",children:"$"}),label:"Min Price"},ie("min_price",{required:!1})))]})]})]})}),(0,i.jsx)(u.Z,{elevation:0,sx:{mt:4,p:4},children:(0,i.jsxs)(o.ZP,{container:!0,children:[(0,i.jsx)(o.ZP,{item:!0,xs:12,md:4,children:(0,i.jsx)(l.Z,{variant:"h6",component:"h2",sx:{fontWeight:"bold"},children:"Category *"})}),(0,i.jsx)(o.ZP,{item:!0,xs:12,md:8,children:(0,i.jsxs)(m.Z,{fullWidth:!0,children:[(0,i.jsx)(p.Z,{id:"demo-simple-select-label",children:"Category"}),(0,i.jsx)(v.Z,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:D,label:"Category",onChange:function(e){T(e.target.value)},children:(null!==(W=null===(n=ee.category)||void 0===n||null===(t=n.list)||void 0===t?void 0:t.filter((function(e){var n;return 1==(null===(n=e.condition)||void 0===n?void 0:n.value)})))&&void 0!==W?W:[]).map((function(e){return(0,i.jsx)(b.Z,{value:e.id,children:e.name},e.id)}))})]})})]})}),(0,i.jsxs)(o.ZP,{container:!0,sx:{mt:4},children:[(0,i.jsx)(o.ZP,{item:!0,xs:12,md:8,children:(0,i.jsx)(y.Z,{variant:"text",color:"error",children:"Delete"})}),(0,i.jsxs)(o.ZP,{item:!0,xs:12,md:4,sx:{justifyContent:"end",display:"flex"},children:[(0,i.jsx)(y.Z,{variant:"outlined",color:"info",sx:{mx:2},children:"Cancel"}),(0,i.jsxs)(y.Z,{variant:"contained",color:"info",disableElevation:!0,type:"submit",children:["Create"," ",ee.task.isLoading&&(0,i.jsx)(g.Z,{color:"secondary",size:20,sx:{ml:2}})]})]})]})]})]})})})}}}]);